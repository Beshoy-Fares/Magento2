<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="AdminApplyTierPriceToProductTest">
        <annotations>
            <features value="Catalog"/>
            <stories value="Apply tier price to a product"/>
            <title value="You should be able to apply tier price to a product."/>
            <description value="You should be able to apply tier price to a product."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-68921"/>
            <group value="product"/>
        </annotations>
        <before>
            <createData entity="Simple_US_Customer" stepKey="createSimpleUSCustomer">
                <field key="group_id">1</field>
            </createData>
            <createData entity="_defaultCategory" stepKey="createCategory"/>
            <createData entity="SimpleProduct" stepKey="createSimpleProduct">
                <requiredEntity createDataKey="createCategory"/>
                <field key="price">100</field>
            </createData>
        </before>
        <after>
            <deleteData createDataKey="createSimpleUSCustomer" stepKey="deleteCustomer"/>
            <deleteData createDataKey="createSimpleProduct" stepKey="deleteSimpleProduct"/>
            <deleteData createDataKey="createCategory" stepKey="deleteCategory"/>
            <actionGroup ref="AdminOpenProductIndexPageActionGroup" stepKey="navigateToProductIndex1"/>
            <actionGroup ref="ResetProductGridToDefaultViewActionGroup" stepKey="resetGridToDefaultKeywordSearch"/>
            <actionGroup ref="AdminLogoutActionGroup" stepKey="logoutFromAdmin"/>
        </after>
        <actionGroup ref="AdminLoginActionGroup" stepKey="loginAsAdmin"/>
      
        <actionGroup ref="SearchForProductOnBackendActionGroup" stepKey="searchForSimpleProduct">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="openEditProduct1">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <scrollToTopOfPage stepKey="scrollToTopOfPage1"/>
       
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForCustomerGroupPriceAddButton1"/>
        <actionGroup ref="AdminProductFormAdvancedPricingAddTierPriceActionGroup" stepKey="addCustomerGroupAllGroupsQty1PriceDiscountAnd10percent">
            <argument name="customerGroup" value="ALL GROUPS"/>
            <argument name="quantity" value="1"/>
            <argument name="priceType" value="Discount"/>
            <argument name="amount" value="10"/>
        </actionGroup> 
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="fillProductTierPriceQtyInput1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="selectProductTierPriceValueType1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="selectProductTierPricePriceInput"/>
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickDoneButton1"/>
        <actionGroup ref="SaveProductFormActionGroup" stepKey="saveProduct1"/>

        <actionGroup ref="LoginToStorefrontActionGroup" stepKey="customerLogin1">
            <argument name="Customer" value="$$createSimpleUSCustomer$$"/>
        </actionGroup>
        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage1">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad1"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('90')}}" stepKey="assertProductFinalPriceIs90_1"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('Regular Price')}}" stepKey="assertRegularPriceLabel_1"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceOld('100')}}" stepKey="assertRegularPriceAmount_1"/>
        <actionGroup ref="StorefrontCustomerLogoutActionGroup" stepKey="logoutCustomer1"/>
        <waitForPageLoad time="30" stepKey="waitForPageLoad2"/>

        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage2">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad3"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('90')}}" stepKey="assertProductFinalPriceIs90_2"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('Regular Price')}}" stepKey="assertRegularPriceLabel_2"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceOld('100')}}" stepKey="assertRegularPriceAmount_2"/>

        <actionGroup ref="AdminOpenProductIndexPageActionGroup" stepKey="navigateToProductIndex2"/>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="openEditProduct2">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <scrollToTopOfPage stepKey="scrollToTopOfPage2"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForcustomerGroupPriceAddButton2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForSelectCustomerGroupNameAttribute1"/>
        <actionGroup ref="AdminProductFormAdvancedPricingUpdateTierPriceActionGroup" stepKey="selectCustomerGroupGeneral">
            <argument name="customerGroup" value="General"/>
            <argument name="quantity" value="1"/>
            <argument name="priceType" value="Discount"/>
            <argument name="amount" value="10"/>
        </actionGroup> 
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickDoneButton2"/>
        <actionGroup ref="SaveProductFormActionGroup" stepKey="saveProduct2"/>

        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage3">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad4"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('100')}}" stepKey="assertProductFinalPriceIs100_1"/>
        <dontSeeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('Regular Price')}}" stepKey="assertRegularPriceLabel_3"/>

        <actionGroup ref="LoginToStorefrontActionGroup" stepKey="customerLogin2">
            <argument name="Customer" value="$$createSimpleUSCustomer$$"/>
        </actionGroup>
        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage4">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad5"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('90')}}" stepKey="assertProductFinalPriceIs90_3"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('Regular Price')}}" stepKey="assertRegularPriceLabel_4"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceOld('100')}}" stepKey="assertRegularPriceAmount_3"/>

        <actionGroup ref="AdminOpenProductIndexPageActionGroup" stepKey="navigateToProductIndex3"/>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="openEditProduct3">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <scrollToTopOfPage stepKey="scrollToTopOfPage3"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton3"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForcustomerGroupPriceAddButton3"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForSelectCustomerGroupNameAttribute2"/>
        <actionGroup ref="AdminProductFormAdvancedPricingUpdateTierPriceActionGroup" stepKey="selectCustomerGroupAllGroups">
            <argument name="customerGroup" value="ALL GROUPS"/>
            <argument name="quantity" value="15"/>
            <argument name="priceType" value="Discount"/>
            <argument name="amount" value="10"/>
        </actionGroup> 
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="fillProductTierPriceQtyInput15"/>
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickToLoseFocusOnRequiredInputElement"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton3_1"/>
        <actionGroup ref="AdminProductFormAdvancedPricingAddTierPriceActionGroup" stepKey="addCustomerGroupAllGroupsQty20PriceDiscountAnd18percent2">
            <argument name="customerGroup" value="ALL GROUPS"/>
            <argument name="quantity" value="20"/>
            <argument name="priceType" value="Discount"/>
            <argument name="amount" value="18"/>
        </actionGroup> 
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="fillProductTierPriceQtyInput20"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="selectProductTierPriceValueType2"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="selectProductTierPricePriceInput18"/>
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickDoneButton3"/>
        <actionGroup ref="SaveProductFormActionGroup" stepKey="saveProduct3"/>

        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage5">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad6"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('100')}}" stepKey="assertProductFinalPriceIs100_2"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('As low as')}}" stepKey="assertAsLowAsPriceLabel_1"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLinkAfterLabel('As low as', '82')}}" stepKey="assertPriceAfterAsLowAsLabel_1"/>
        <actionGroup ref="StorefrontCustomerLogoutActionGroup" stepKey="logoutCustomer2"/>
        <waitForPageLoad time="30" stepKey="waitForPageLoad7"/>

        <actionGroup ref="StorefrontNavigateCategoryPageActionGroup" stepKey="navigateToCategoryPage6">
            <argument name="category" value="$createCategory$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForPageLoad8"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceFinal('100')}}" stepKey="assertProductFinalPriceIs100_3"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLabel('As low as')}}" stepKey="assertAsLowAsPriceLabel_2"/>
        <seeElement selector="{{StorefrontCategoryProductSection.productPriceLinkAfterLabel('As low as', '82')}}" stepKey="assertPriceAfterAsLowAsLabel_2"/>
        <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="goToProductPage1">
            <argument name="productUrl" value="$$createSimpleProduct.name$$"/>
        </actionGroup>
        <waitForPageLoad time="30" stepKey="waitForPageLoad9"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceByForTextLabel('1', '15')}}" stepKey="assertProductTierPriceByForTextLabelForFirstRow1"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceByForTextLabel('2', '20')}}" stepKey="assertProductTierPriceByForTextLabelForSecondRow1"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceAmount('1', '90')}}" stepKey="assertProductTierPriceAmountForFirstRow1"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceAmount('2', '82')}}" stepKey="assertProductTierPriceAmountForSecondRow1"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceSavePercentageAmount('1', '10')}}" stepKey="assertProductTierPriceSavePercentageAmountForFirstRow1"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceSavePercentageAmount('2', '18')}}" stepKey="assertProductTierPriceSavePercentageAmountForSecondRow1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="fillProductQuantity1"/>

        <actionGroup ref="StorefrontEnterProductQuantityAndAddToTheCartActionGroup" stepKey="addToCartFromStorefrontProductPage">
            <argument name="quantity" value="10"/>
        </actionGroup>
        <actionGroup ref="ClickViewAndEditCartFromMiniCartActionGroup" stepKey="goToCheckoutFromMinicart"/>
        <seeInField userInput="10" selector="{{CheckoutCartProductSection.ProductQuantityByName($$createSimpleProduct.name$$)}}" stepKey="seeInQtyField10"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField1"/>
        <assertEquals message="Shopping cart should contain subtotal $1,000" stepKey="assertSubtotalField1">
            <expectedResult type="string">$1,000.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField1</actualResult>
        </assertEquals>
       
        <actionGroup ref="StorefrontChangeProductQtyInTheCartActionGroup" stepKey="fillProductQuantity2">
            <argument name="productName" value="$$createSimpleProduct.name$$"/>
            <argument name="qty" value="15"/>
        </actionGroup>
        <actionGroup ref="AdminUpdateShoppingCartActionGroup" stepKey="clickUpdateShoppingCartButton1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForLoadingMaskToDisappear1"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField2"/>
        <assertEquals message="Shopping cart should contain subtotal $1,350" stepKey="assertSubtotalField2">
            <expectedResult type="string">$1,350.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField2</actualResult>
        </assertEquals>

        <actionGroup ref="StorefrontChangeProductQtyInTheCartActionGroup" stepKey="fillProductQuantity3">
            <argument name="productName" value="$$createSimpleProduct.name$$"/>
            <argument name="qty" value="20"/>
        </actionGroup>
        <actionGroup ref="AdminUpdateShoppingCartActionGroup" stepKey="clickUpdateShoppingCartButton2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForLoadingMaskToDisappear2"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField3"/>
        <assertEquals message="Shopping cart should contain subtotal $1,640" stepKey="assertSubtotalField3">
            <expectedResult type="string">$1,640.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField3</actualResult>
        </assertEquals>
       
        <actionGroup ref="AdminOpenProductIndexPageActionGroup" stepKey="navigateToProductIndex4"/>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="openEditProduct4">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <scrollToTopOfPage stepKey="scrollToTopOfPage4"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton4"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForcustomerGroupPriceAddButton4"/>
        <actionGroup ref="AdminProductFormAdvancedPricingUpdateTierPriceActionGroup" stepKey="selectProductTierPricePercentageValue2">
            <argument name="customerGroup" value="ALL GROUPS"/>
            <argument name="quantity" value="20"/>
            <argument name="priceType" value="Discount"/>
            <argument name="amount" value="25"/>
        </actionGroup>   
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickDoneButton4"/>
        <actionGroup ref="SaveProductFormActionGroup" stepKey="saveProduct4"/>

        <actionGroup ref="StorefrontCartPageOpenActionGroup" stepKey="goToShoppingCartPage1"/>
        <seeInField userInput="20" selector="{{CheckoutCartProductSection.ProductQuantityByName($$createSimpleProduct.name$$)}}" stepKey="seeInQtyField20"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField4"/>
        <assertEquals message="Shopping cart should contain subtotal $1,500" stepKey="assertSubtotalField4">
            <expectedResult type="string">$1,500.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField4</actualResult>
        </assertEquals>
        <grabTextFrom selector="{{CheckoutCartSummarySection.subtotal}}" stepKey="grabTextFromCheckoutCartSummarySectionSubtotal1"/>
        <assertEquals message="Shopping cart summary section should contain subtotal $1,500" stepKey="assertSubtotalFieldFromCheckoutCartSummarySection1">
            <expectedResult type="string">$1,500.00</expectedResult>
            <actualResult type="variable">grabTextFromCheckoutCartSummarySectionSubtotal1</actualResult>
        </assertEquals>

        <actionGroup ref="StorefrontClickOnMiniCartActionGroup" stepKey="openMiniCart1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForminiCartSubtotalField1"/>
        <grabTextFrom selector="{{StorefrontMinicartSection.miniCartSubtotalField}}" stepKey="grabTextFromMiniCartSubtotalField"/>
        <assertEquals message="Mini shopping cart should contain subtotal $1,500" stepKey="assertSubtotalFieldFromMiniShoppingCart1">
            <expectedResult type="string">$1,500.00</expectedResult>
            <actualResult type="variable">grabTextFromMiniCartSubtotalField</actualResult>
        </assertEquals>

        <actionGroup ref="AdminNavigateToStoresConfigurationSalesSalesMSRPActionGroup" stepKey="navigateToAdminSalesConfigPageMAPTab1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForAdminSalesConfigPageLoad1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="uncheckMAPUseSystemValue"/>
        <actionGroup ref="AdminEnableDisableMAPActionGroup" stepKey="setEnableMAPYes"/>
        <actionGroup ref="AdminSaveConfigActionGroup" stepKey="saveConfig1"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeConfigSuccessMessage2"/>
        <actionGroup ref="ClearCacheActionGroup" stepKey="flushCache1"/>

        <actionGroup ref="StorefrontCartPageOpenActionGroup" stepKey="goToShoppingCartPage2"/>
        <seeInField userInput="20" selector="{{CheckoutCartProductSection.ProductQuantityByName($$createSimpleProduct.name$$)}}" stepKey="seeInQtyField20_2"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField5"/>
        <assertEquals message="Shopping cart should contain subtotal $1,500" stepKey="assertSubtotalField5">
            <expectedResult type="string">$1,500.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField5</actualResult>
        </assertEquals>

        <actionGroup ref="AdminNavigateToStoresConfigurationSalesSalesMSRPActionGroup" stepKey="navigateToAdminSalesConfigPageMAPTab2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForAdminSalesConfigPageLoad2"/>
        <actionGroup ref="AdminEnableDisableMAPActionGroup" stepKey="setEnableMAPNo">
            <argument name="status" value="No"/>
        </actionGroup>    
        <actionGroup ref="AdminSaveConfigActionGroup" stepKey="saveConfig2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeConfigSuccessMessage1"/>
        <actionGroup ref="ClearCacheActionGroup" stepKey="flushCache2"/>

        <actionGroup ref="StorefrontCartPageOpenActionGroup" stepKey="goToShoppingCartPage3"/>
        <seeInField userInput="20" selector="{{CheckoutCartProductSection.ProductQuantityByName($$createSimpleProduct.name$$)}}" stepKey="seeInQtyField20_3"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField6"/>
        <assertEquals message="Shopping cart should contain subtotal $1,500" stepKey="assertSubtotalField6">
            <expectedResult type="string">$1,500.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField6</actualResult>
        </assertEquals>
       
        <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="goToProductPage2">
            <argument name="productUrl" value="$$createSimpleProduct.name$$"/>
        </actionGroup>
        <waitForPageLoad time="30" stepKey="waitForPageLoad10"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceByForTextLabel('1', '15')}}" stepKey="assertProductTierPriceByForTextLabelForFirstRow2"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceByForTextLabel('2', '20')}}" stepKey="assertProductTierPriceByForTextLabelForSecondRow2"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceAmount('1', '90')}}" stepKey="assertProductTierPriceAmountForFirstRow2"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceAmount('2', '75')}}" stepKey="assertProductTierPriceAmountForSecondRow2"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceSavePercentageAmount('1', '10')}}" stepKey="assertProductTierPriceSavePercentageAmountForFirstRow2"/>
        <seeElement selector="{{StorefrontProductInfoMainSection.productTierPriceSavePercentageAmount('2', '25')}}" stepKey="assertProductTierPriceSavePercentageAmountForSecondRow2"/>
        <actionGroup ref="AdminOpenProductIndexPageActionGroup" stepKey="navigateToProductIndex5"/>
        <actionGroup ref="OpenEditProductOnBackendActionGroup" stepKey="openEditProduct5">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <scrollToTopOfPage stepKey="scrollToTopOfPage5"/>

        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton5"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForcustomerGroupPriceDeleteButton"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="scrollToDeleteFirstRowOfCustomerGroupPrice"/>
        <actionGroup ref="AdminDeleteTierPriceActionGroup" stepKey="deleteFirstRowOfCustomerGroupPrice"/>
        <actionGroup ref="AdminDeleteTierPriceActionGroup" stepKey="deleteSecondRowOfCustomerGroupPrice"/>
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="clickDoneButton5"/>
        <actionGroup ref="SaveProductFormActionGroup" stepKey="saveProduct5"/>
        <scrollToTopOfPage stepKey="scrollToTopOfPage6"/>
        <actionGroup ref="AdminProductFormOpenAdvancedPricingDialogActionGroup" stepKey="clickOnAdvancedPricingButton6"/>
        <waitForElement selector="{{AdminProductFormAdvancedPricingSection.customerGroupPriceAddButton}}" stepKey="waitForcustomerGroupPriceAddButton5"/>
        <dontSeeElement selector="{{AdminProductFormAdvancedPricingSection.productTierPriceQtyInput('0')}}" stepKey="dontSeeQtyInputOfFirstRow"/>
        <dontSeeElement selector="{{AdminProductFormAdvancedPricingSection.productTierPriceQtyInput('1')}}" stepKey="dontSeeQtyInputOfSecondRow"/>
        <actionGroup ref="AdminProductFormDoneAdvancedPricingDialogActionGroup" stepKey="closeAdvancedPricingPopup"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForAdminProductFormSectionProductPriceInput"/>
        <actionGroup ref="AdminFillProductPriceFieldAndPressEnterOnProductEditPageActionGroup" stepKey="fillProductPrice200">
            <argument name="price" value="200"/>
        </actionGroup>
        <actionGroup ref="AdminProductFormSaveActionGroup" stepKey="clickSaveButton"/>

        <actionGroup ref="StorefrontCartPageOpenActionGroup" stepKey="goToShoppingCartPage4"/>
        <grabTextFrom selector="{{CheckoutCartProductSection.productSubtotalByName($$createSimpleProduct.name$$)}}" stepKey="grabTextFromSubtotalField7"/>
        <assertEquals message="Shopping cart should contain subtotal $4,000" stepKey="assertSubtotalField7">
            <expectedResult type="string">$4,000.00</expectedResult>
            <actualResult type="variable">grabTextFromSubtotalField7</actualResult>
        </assertEquals>
        <grabTextFrom selector="{{CheckoutCartSummarySection.subtotal}}" stepKey="grabTextFromCheckoutCartSummarySectionSubtotal2"/>
        <assertEquals message="Shopping cart summary section should contain subtotal $4,000" stepKey="assertSubtotalFieldFromCheckoutCartSummarySection2">
            <expectedResult type="string">$4,000.00</expectedResult>
            <actualResult type="variable">grabTextFromCheckoutCartSummarySectionSubtotal2</actualResult>
        </assertEquals>
        <actionGroup ref="StorefrontClickOnMiniCartActionGroup" stepKey="openMiniCart2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForminiCartSubtotalField2"/>

        <grabTextFrom selector="{{StorefrontMinicartSection.miniCartSubtotalField}}" stepKey="grabTextFromMiniCartSubtotalField2"/>
        <assertEquals message="Mini shopping cart should contain subtotal $4,000" stepKey="assertSubtotalFieldFromMiniShoppingCart2">
            <expectedResult type="string">$4,000.00</expectedResult>
            <actualResult type="variable">grabTextFromMiniCartSubtotalField2</actualResult>
        </assertEquals>
    </test>
</tests>
