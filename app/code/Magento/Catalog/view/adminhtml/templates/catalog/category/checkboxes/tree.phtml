<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
declare(strict_types=1);

use Magento\Catalog\Block\Adminhtml\Category\Tree;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var Tree $block */
?>

<?php $divId = $escaper->escapeHtml('tree-div_' . time()) ?>
<div id="<?= /* @noEscape */ $divId ?>" class="tree"></div>

<script type="text/x-magento-init">
    {
        "*": {
            "categoryCheckboxTree": {
                "dataUrl":       "<?= $escaper->escapeUrl($block->getLoadTreeUrl()) ?>",
                "divId":         "<?= /* @noEscape */ $divId ?>",
                "rootVisible":   false,
                "useAjax":       <?= $escaper->escapeHtml($block->getUseAjax()) ?>,
                "currentNodeId": <?= (int)$block->getCategoryId() ?>,
                "jsFormObject":  "<?= /* @noEscape */ $block->getJsFormObject() ?>",
                "name":          "<?= $escaper->escapeHtml($block->getRoot()->getName()) ?>",
                "checked":       "<?= $escaper->escapeHtml($block->getRoot()->getChecked()) ?>",
                "allowdDrop":    <?= /* @noEscape */ $block->getRoot()->getIsVisible() ? 'true' : 'false' ?>,
                "rootId":        <?= (int)$block->getRoot()->getId() ?>,
                "expanded":      true,
                "categoryId":    <?= (int)$block->getCategoryId() ?>,
                "treeJson":      <?= /* @noEscape */ $block->getTreeJson() ?>
            }
        }
    }
</script>
