<?php
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */

/**
 * Product media data template
 *
 * @var $block \Magento\Catalog\Block\Product\View\Gallery
 */
?>
<div class="gallery-placeholder" data-gallery-role="gallery-placeholder"></div>
<script type="text/x-magento-init">
    {
        "[data-gallery-role=gallery-placeholder]": {
            "mage/gallery/gallery": {
                "mixins":["magnifier/magnify"],
                "magnifierOpts": <?php echo $block->getMagnifier(); ?>,
                "data": <?php echo $block->getGalleryImagesJson(); ?>,
                "options": {
                    "nav": "<?php echo $block->getVar("gallery/navigation"); ?>",
                    "loop": <?php echo $block->getVar("gallery/loop"); ?>,
                    "keyboard": <?php echo $block->getVar("gallery/keyboard"); ?>,
                    "arrows": <?php echo $block->getVar("gallery/arrows"); ?>,
                    "showCaption": <?php echo $block->getVar("gallery/show_caption"); ?>,
                    "width": <?php echo $block->getImageAttribute('product_page_image_medium', 'width'); ?>,
                    "thumbwidth": <?php echo $block->getImageAttribute('product_page_image_small', 'width'); ?>,
                    "thumbheight": <?php echo $block->getImageAttribute('product_page_image_small', 'height')
                        ?: $block->getImageAttribute('product_page_image_small', 'width'); ?>,
                    "height": <?php echo $block->getImageAttribute('product_page_image_medium', 'height')
                        ?: $block->getImageAttribute('product_page_image_medium', 'width'); ?>
                },
                "breakpoints": <?php echo $block->getBreakpoints(); ?>
            }
        }
    }
</script>
