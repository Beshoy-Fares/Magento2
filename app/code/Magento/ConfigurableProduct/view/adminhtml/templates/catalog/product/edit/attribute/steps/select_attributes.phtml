<?php
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */

/* @var $block \Magento\ConfigurableProduct\Block\Adminhtml\Product\Steps\SelectAttributes */
?>
<?php
/** @var \Magento\Backend\Block\Widget\Button $attributeCreate */
$attributeCreate = $this->getLayout()->createBlock(
    'Magento\Backend\Block\Widget\Button'
);
$attributeCreate->setDataAttribute(
    [
        'mage-init' => [
            'productAttributes' => [
                'url' => $this->getUrl('catalog/product_attribute/new', [
                    'store' => $block->getProduct()->getStoreId(),
                    'product_tab' => 'variations',
                    'popup' => 1,
                    '_query' => [
                        'attribute' => [
                            'is_global' => 1,
                            'frontend_input' => 'select',
                        ],
                    ],
                ]),
            ],
        ],
    ]
)->setType(
    'button'
)->setLabel(
    __('Add New Attribute')
);
echo $attributeCreate->toHtml();

echo $block->getChildHtml();
?>

<script type="text/x-magento-init">
    {
        "*": {
            "Magento_Ui/js/core/app": {
                "components": {
                    "select-attributes-step": {
                        "component": "Magento_ConfigurableProduct/js/variations/steps/select_attributes",
                        "multiselectName": "product_attributes_listing.product_attributes_listing.product_attributes_columns.ids",
                        "providerName": "product_attributes_listing.product_attributes_listing_data_source",
                        "appendTo": "<?= $block->getParentComponentName()?>"
                    }
                }
            }
        }
    }
</script>
