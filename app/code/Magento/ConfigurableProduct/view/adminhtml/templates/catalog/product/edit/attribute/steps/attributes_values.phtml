<?php
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */

/* @var $block \Magento\ConfigurableProduct\Block\Adminhtml\Product\Steps\AttributeValues */
?>
<div data-bind="scope: 'attributes-values-step'">
    <div data-bind="foreach: attributes" class="draggable-handle">
        <div class="attribute" style="padding-bottom: 30px;">
            <input style="float: left; border: 0px" data-bind="value: label" />
            <div style="float: right; font-size: smaller;">
                <a style="text-decoration: underline;" href="#" data-bind="click: $parent.removeAttribute" >
                    <?= __('Remove Attribute') ?>
                </a>
                <span style="cursor: pointer" data-bind="click: $parent.toggleOpened">
                    <span data-bind="if: opened">-</span>
                    <span data-bind="ifnot: opened">+</span>
                </span>
            </div>
            <div data-bind="style: {'border-bottom': !opened() && '1px solid gray'}" style="clear: both;"></div>
            <fieldset data-bind="visible: opened" style="clear: both;">
                <span data-bind="text: $data.options().length"></span> <span><?= __('Options') ?></span>
                <a href="#" data-bind="click: $parent.selectAllAttributes" style="
                    float: right;
                    font-size: smaller;
                "><?= __('Select All') ?></a>
                <ul data-bind="foreach: options" style="
                    list-style-type: none;
                    text-transform: capitalize;
                ">
                    <li>
                        <input
                            type="checkbox"
                            data-bind="checkedValue: value, checked: !value || $parent.chosenOptions"
                        />
                        <span data-bind="text: label, visible: value"></span>
                        <input data-bind="value: label, visible: !value" type="text">
                        <a href="#" data-bind="visible: !value, click: $parents[1].saveOption.bind($parent)">-></a>
                        <a href="#" data-bind="visible: !value, click: $parents[1].removeOption.bind($parent)
                        ">X</a>
                    </li>
                </ul>
                <a data-action="addOption" href="#" data-bind="click: $parent.createOption">
                    <?= __('Create New Value') ?>
                </a>
            </fieldset>
        </div>
    </div>
</div>
<script type="text/x-magento-init">

    {
        "*": {
            "Magento_Ui/js/core/app": {
                "components": {
                        "attributes-values-step": {
                            "component": "Magento_ConfigurableProduct/js/variations/steps/attributes_values",
                            "appendTo": "<?= $block->getComponentName()?>",
                            "options_url": "<?= $block->getUrl('catalog/product_attribute/getAttributes')?>"

                        }
                    }
                }
            }
    }
</script>
