<!--
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<div class="admin__field" css="element.setClasses(element)">
    <!-- ko if: element.label -->
    <label class="admin__field-label" data-bind="attr: { for: element.uid }">
        <span data-bind="text: element.label"></span>
    </label>
    <!-- /ko -->

    <div class="dynamic-rows admin__field-control" data-role="grid-wrapper">
        <table class="admin__control-table tiers_table" data-role="grid">
            <thead if="element.renderColumnsHeader">
            <tr>
                <!-- ko if: dndConfig.enabled -->
                <th>

                </th>
                <!-- /ko -->
                <!-- ko foreach: {data: labels, as: 'label'}  -->
                    <th data-bind="
                        text: label.config.label,
                        css: $parent.setClasses(label.config)
                    ">
                    </th>
                <!-- /ko -->
            </tr>
            </thead>
            <tbody data-bind="foreach: elems">
                <tr class="data-row">
                    <!-- ko if: $parent.dndConfig.enabled -->
                        <td data-bind="
                            template: {name: $parent.dndConfig.template, data: $parent.dnd}
                        "></td>
                    <!-- /ko -->
                    <!-- ko foreach: { data: elems, as: 'elem'}  -->
                        <!-- ko if: elem.template-->
                            <!-- ko if: $parents[1].collapsibleHeader-->
                                <td data-bind="
                                    css: $parents[1].setClasses(elem)
                                ">
                                    <div collapsible="openClass: '_show', closeOnOuter: false">
                                        <button type="button" toggleCollapsible>
                                            <span>COLLAPSIBLE<span/>
                                        </button>
                                        <div text="$parent.getHeaderLabel()"></div>
                                        <button type="button" data-bind="
                                            click: function(){
                                                $parents[1].deleteRecord($parent.index)
                                            }
                                        ">
                                            <span>
                                                ACTIONDELETE
                                            <span/>
                                        </button>
                                        <div class="admin__fieldset admin__fieldset-wrapper-content admin__collapsible-content" data-bind="
                                            css: {_show: $collapsible.opened()},
                                            template: elem.template
                                        "></div>
                                    </div>
                                </td>
                            <!-- /ko -->

                        <!-- ko ifnot: $parents[1].collapsibleHeader-->
                            <td data-bind="
                                    css: $parents[1].setClasses(elem),
                                    template: elem.template
                                "></td>
                            <!-- /ko -->
                        <!-- /ko -->
                    <!-- /ko -->
                </tr>
            </tbody>
        </table>
        <!-- ko if: element.addButton -->
        <div class="admin__control-table-action">
            <button data-bind="
                attr: {disabled: disabled},
                text: addButtonLabel,
                click: addChild.bind($data, false, false)">
            </button>
        </div>
        <!-- /ko -->
    </div>
</div>
