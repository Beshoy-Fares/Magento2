<!--
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<li id="opc-shipping" data-bind="fadeVisible: isActive(), attr: {'class': stepClassAttributes() }">
    <div class="step-title" data-role="title" data-bind="click: navigateToCurrentStep">
        <h2 data-bind="text: $t('Shipping Information')"></h2>
    </div>
    <div id="checkout-step-shipping"
         class="step-content"
         data-role="content"
         data-bind="fadeVisible: isVisible()">
        <!-- ko foreach: getRegion('address-list') -->
        <!-- ko template: getTemplate() --><!-- /ko -->
        <!--/ko-->

        <!-- ko foreach: getRegion('address-list-additional-addresses') -->
        <!-- ko template: getTemplate() --><!-- /ko -->
        <!--/ko-->

        <!-- ko foreach: getRegion('before-form') -->
        <!-- ko template: getTemplate() --><!-- /ko -->
        <!--/ko-->

        <!-- Address form pop up -->
        <!-- ko if: (!isFormInline) -->
        <button type="button" aria-haspopup="true" class="action action-show-popup" data-open-dialog="co-shipping-form">
            <span data-bind="click: showFormPopUp, text: isNewAddressAdded() ? $t('Edit Delivery Address') : $t('+ New Address')"></span>
        </button>
        <div data-bind="fadeVisible: isFormPopUpVisible">
            <form class="form form-shipping-address" id="co-shipping-form" data-hasrequired="* Required Fields">
                <!-- ko foreach: getRegion('before-fields') -->
                <!-- ko template: getTemplate() --><!-- /ko -->
                <!--/ko-->
                <fieldset id="shipping-new-address-form" class="fieldset address">
                <!-- ko foreach: getRegion('additional-fieldsets') -->
                <!-- ko template: getTemplate() --><!-- /ko -->
                <!--/ko-->
                <!-- ko if: (isCustomerLoggedIn) -->
                    <div class="field choice">
                        <input type="checkbox" class="checkbox" name="shipping[save_in_address_book]" id="shipping-save-in-address-book" checked="checked" />
                        <label class="label" for="shipping-save-in-address-book">
                            <span data-bind="text: $t('Save in address book')"></span>
                        </label>
                    </div>
                <!-- /ko -->
                </fieldset>
            </form>
            <button type="button" class="action action-save-address">
                <span data-bind="click: saveNewAddress, text: $t('Save Address')"></span>
            </button>
            <button type="button" class="action action-hide-popup">
                <span data-bind="click: hideFormPopUp, text: $t('Cancel')"></span>
            </button>
        </div>
        <!-- /ko -->

        <!-- Inline address form -->
        <!-- ko if: (isFormInline) -->
        <form class="form form-shipping-address" id="co-shipping-form" data-hasrequired="* Required Fields">
            <!-- ko foreach: getRegion('before-fields') -->
            <!-- ko template: getTemplate() --><!-- /ko -->
            <!--/ko-->
            <fieldset id="shipping-new-address-form" class="fieldset address">
            <!-- ko foreach: getRegion('additional-fieldsets') -->
            <!-- ko template: getTemplate() --><!-- /ko -->
            <!--/ko-->
            </fieldset>
        </form>
        <!-- /ko -->
    </div>
</li>
