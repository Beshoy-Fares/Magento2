<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="CheckCheckoutSuccessPageAsRegisterCustomerTest">
        <annotations>
            <features value="Checkout"/>
            <stories value="Success page elements are presented for placed order as Customer"/>
            <title value="Customer Checkout"/>
            <description value="To be sure that other elements of Success page are shown for placed order as registered Customer."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-16488"/>
            <skip>
                <issueId value="MQE-2834" />
            </skip>
            <group value="checkout"/>
        </annotations>
        <before>
            <createData entity="SimpleTwo" stepKey="createSimpleProduct"/>
            <createData entity="Simple_US_Customer" stepKey="createSimpleUsCustomer">
                <field key="group_id">1</field>
            </createData>
        </before>

        <after>
            <actionGroup ref="AdminLoginActionGroup" stepKey="adminLogin"/>
            <actionGroup ref="AdminOrdersGridClearFiltersActionGroup" stepKey="goToOrdersPage"/>
            <actionGroup ref="AdminGridColumnShowActionGroup" stepKey="showCustomerEmailColumn">
                <argument name="columnLabel" value="Customer Email"/>
            </actionGroup>
            <actionGroup ref="AdminGridFilterFillInputFieldActionGroup" stepKey="filterOrdersByCustomerEmail">
                <argument name="filterInputName" value="customer_email"/>
                <argument name="filterValue" value="$$createSimpleUsCustomer.email$$"/>
            </actionGroup>
            <actionGroup ref="AdminGridFilterApplyActionGroup" stepKey="applyFilters"/>
            <actionGroup ref="AdminGridBulkActionGroup" stepKey="cancelOrders">
                <argument name="actionLabel" value="Cancel"/>
            </actionGroup>
            <actionGroup ref="AdminLogoutActionGroup" stepKey="adminLogout"/>

            <amOnPage url="{{StorefrontCustomerLogoutPage.url}}" stepKey="logoutCustomerOne"/>
            <waitForPageLoad stepKey="waitLogoutCustomerOne"/>
            <deleteData createDataKey="createSimpleProduct" stepKey="deleteProduct"/>
            <deleteData createDataKey="createSimpleUsCustomer" stepKey="deleteCustomer"/>
        </after>

        <actionGroup ref="LoginToStorefrontActionGroup" stepKey="signUpNewUser">
            <argument name="Customer" value="$$createSimpleUsCustomer$$"/>
        </actionGroup>

        <actionGroup ref="StorefrontOpenProductEntityPageActionGroup" stepKey="navigateToSimpleProductPage">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForCatalogPageLoad"/>

        <actionGroup ref="AddToCartFromStorefrontProductPageActionGroup" stepKey="addToCartFromStorefrontProductPage">
            <argument name="productName" value="$$createSimpleProduct.name$$"/>
        </actionGroup>

        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicart"/>
        <actionGroup ref="StorefrontSelectFirstShippingMethodActionGroup" stepKey="selectFirstShippingMethod"/>
        <comment userInput="Adding the comment to replace waitForLoadingMask2 action for preserving Backward Compatibility" stepKey="waitForLoadingMask2"/>
        <actionGroup ref="StorefrontCheckoutClickNextButtonActionGroup" stepKey="clickNext"/>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPayment"/>
        <actionGroup ref="ClickPlaceOrderActionGroup" stepKey="clickPlaceOrder"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeSuccessTitle"/>
        <see selector="{{CheckoutSuccessMainSection.orderNumberText}}" userInput="Your order number is: " stepKey="seeOrderNumber"/>
        <see selector="{{CheckoutSuccessMainSection.success}}" userInput="We'll email you an order confirmation with details and tracking info." stepKey="seeSuccessNotify"/>

        <actionGroup ref="StorefrontClickOrderLinkFromCheckoutSuccessPageActionGroup" stepKey="clickOrderLink"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeMyOrderPage"/>
       
        <actionGroup ref="StorefrontOpenProductEntityPageActionGroup" stepKey="navigateToSimpleProductPage2">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForCatalogPageLoad2"/>

        <actionGroup ref="AddToCartFromStorefrontProductPageActionGroup" stepKey="addToCartFromStorefrontProductPage2">
            <argument name="productName" value="$$createSimpleProduct.name$$"/>
        </actionGroup>

        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicart2"/>
        <actionGroup ref="StorefrontSelectFirstShippingMethodActionGroup" stepKey="selectFirstShippingMethod2"/>
        <comment userInput="Adding the comment to replace waitForLoadingMask3 action for preserving Backward Compatibility" stepKey="waitForLoadingMask3"/>
        <actionGroup ref="StorefrontCheckoutClickNextButtonActionGroup" stepKey="clickNext2"/>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPayment2"/>
        <actionGroup ref="ClickPlaceOrderActionGroup" stepKey="clickPlaceOrder2"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForLoadSuccessPage2"/>
        <actionGroup ref="StorefrontClickContinueShoppingButtonActionGroup" stepKey="clickContinueShoppingButton"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeHomePageTitle"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="seeHomePageUrl"/>

        <actionGroup ref="StorefrontOpenProductEntityPageActionGroup" stepKey="navigateToSimpleProductPage3">
            <argument name="product" value="$$createSimpleProduct$$"/>
        </actionGroup>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForCatalogPageLoad3"/>

        <actionGroup ref="AddToCartFromStorefrontProductPageActionGroup" stepKey="addToCartFromStorefrontProductPage3">
            <argument name="productName" value="$$createSimpleProduct.name$$"/>
        </actionGroup>

        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicart3"/>
        <actionGroup ref="StorefrontSelectFirstShippingMethodActionGroup" stepKey="selectFirstShippingMethod3"/>
        <comment userInput="Adding the comment to replace waitForLoadingMask4 action for preserving Backward Compatibility" stepKey="waitForLoadingMask4"/>
        <actionGroup ref="StorefrontCheckoutClickNextButtonActionGroup" stepKey="clickNext3"/>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPayment3"/>
        <actionGroup ref="ClickPlaceOrderActionGroup" stepKey="clickPlaceOrder3"/>
        <comment userInput="Comment is added to preserve the step key for backward compatibility" stepKey="waitForLoadSuccessPage3"/>

        <seeElement selector="{{CheckoutSuccessMainSection.printLink}}" stepKey="seeVisiblePrint"/>
        <resizeWindow width="600" height="800" stepKey="resizeWindow"/>
        <waitForElementNotVisible selector="{{CheckoutSuccessMainSection.printLink}}" stepKey="waitInvisiblePrint"/>
        <dontSeeElement selector="{{CheckoutSuccessMainSection.printLink}}" stepKey="seeInvisiblePrint"/>
        <resizeWindow width="1360" height="1020" stepKey="maximizeWindowKey1"/>
        <waitForElementVisible selector="{{CheckoutSuccessMainSection.printLink}}" stepKey="waitVisiblePrint"/>
        <seeElement selector="{{CheckoutSuccessMainSection.printLink}}" stepKey="seeVisiblePrint2"/>

        <actionGroup ref="StorefrontClickPrintOrderLinkOnViewOrderPageActionGroup" stepKey="clickPrintLink"/>
        <switchToWindow stepKey="switchToWindow"/>
        <switchToNextTab stepKey="switchToTab"/>
        <seeInCurrentUrl url="sales/order/print/order_id" stepKey="seePrintPage"/>
        <seeElement selector="{{StorefrontCustomerOrderViewSection.orderTitle}}" stepKey="seeOrderTitleOnPrint"/>
        <switchToWindow stepKey="switchToWindow2"/>
    </test>
</tests>
