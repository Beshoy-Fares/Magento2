<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
declare(strict_types=1);

use Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var Downloadable $block */
$_item = $block->getItem();
$_order = $block->getItem()->getOrder();
?>
<tr>
    <td class="item-info has-extra">
        <p class="product-name"><?= $escaper->escapeHtml($_item->getName()) ?></p>
        <p class="sku"><?= $escaper->escapeHtml(__('SKU')) ?>: <?= $escaper->escapeHtml($block->getSku($_item)) ?></p>
        <?php if ($block->getItemOptions()) : ?>
        <dl>
            <?php foreach ($block->getItemOptions() as $option) : ?>
            <dt><strong><em><?= $escaper->escapeHtml($option['label']) ?></em></strong></dt>
            <dd><?= $escaper->escapeHtml($option['value']) ?></dd>
            <?php endforeach; ?>
        </dl>
        <?php endif; ?>
        <?php if ($links = $block->getLinks()->getPurchasedItems()) : ?>
        <dl>
            <dt><strong><em><?= $escaper->escapeHtml($block->getLinksTitle()) ?></em></strong></dt>
            <?php foreach ($links as $link) : ?>
                <dd>
                    <?= $escaper->escapeHtml($link->getLinkTitle()) ?>&nbsp;
                    (<a href="<?= $escaper->escapeUrl($block->getPurchasedLinkUrl($link)) ?>"><?= $escaper->escapeHtml(__('download')) ?></a>)
                </dd>
            <?php endforeach; ?>
        </dl>
        <?php endif; ?>
        <?= $escaper->escapeHtml($_item->getDescription()) ?>
    </td>
    <td class="item-qty"><?= (float)$_item->getQty() * 1 ?></td>
    <td class="item-price">
        <?= /* @noEscape */ $block->getItemPrice($_item) ?>
    </td>
</tr>
