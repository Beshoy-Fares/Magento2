<?php
/** @var \Magento\GoogleAdwords\Helper\Data $helper */
$helper = $block->getHelper();
if ($helper->isGoogleAdwordsConfigurable()) {
    ?>
<script>
console.log("GoogleAdwords - START - gtag config");
if (gtag) {
  console.log("GoogleAdwords - gtag already exists...");
  gtag('config', '<?= $helper->getConversionId() ?>');
} else {
  console.log("GoogleAdwords - gtag does not already exist...");
  // Inject Global Site Tag 
  var gtagScript = document.createElement('script');
  gtagScript.type = 'text/javascript';
  gtagScript.async = true;
  gtagScript.src = '<?= $helper->getConversionGtagGlobalSiteTagSrc() ?>';
  document.head.appendChild(gtagScript);
  
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('set', '<?= $helper->getDeveloperId() ?>', true);
  gtag('config', '<?= $helper->getConversionId() ?>');
}
console.log("GoogleAdwords - END - gtag config");
</script>
<?php } ?>