<?php
/**
 * Copyright Â© 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */
namespace Magento\GiftMessage\Test\Unit\Block;

use Magento\GiftMessage\Block\Options;

class OptionsTest extends \PHPUnit_Framework_TestCase
{
    /** @var  \Magento\Backend\Block\Template\Context|\PHPUnit_Framework_MockObject_MockObject */
    protected $context;

    /** @var \Magento\Framework\Data\Form\FormKey|\PHPUnit_Framework_MockObject_MockObject */
    protected $formKey;

    /** @var \Magento\Checkout\Model\CompositeConfigProvider|\PHPUnit_Framework_MockObject_MockObject */
    protected $compositeConfigProvider;

    /** @var \Magento\Checkout\Model\CompositeConfigProvider|\PHPUnit_Framework_MockObject_MockObject */
    protected $layoutProcessor;

    /** @var \Magento\GiftMessage\Block\Options */
    protected $object;

    public function setUp()
    {
        $this->context = $this->getMock('Magento\Backend\Block\Template\Context', [], [], '', false);
        $this->formKey = $this->getMock('Magento\Framework\Data\Form\FormKey', [], [], '', false);
        $this->compositeConfigProvider = $this->getMock(
            'Magento\Checkout\Model\CompositeConfigProvider',
            [],
            [],
            '',
            false
        );
        $this->layoutProcessor = $this->getMockForAbstractClass(
            'Magento\Checkout\Block\Checkout\LayoutProcessorInterface',
            [],
            '',
            false
        );
        $this->object =  new Options(
            $this->context,
            $this->formKey,
            $this->compositeConfigProvider,
            [$this->layoutProcessor],
            ['jsLayout' => []]
        );
    }

    public function testGetJsLayout()
    {
        $this->layoutProcessor->expects($this->once())
            ->method('process')
            ->willReturn([]);
        $this->assertEquals('[]', $this->object->getJsLayout());
    }

    public function testGetCheckoutConfigJson()
    {
        $this->compositeConfigProvider->expects($this->once())
            ->method('getConfig')
            ->willReturn([]);
        $this->assertEquals('[]', $this->object->getCheckoutConfigJson());
    }
}
