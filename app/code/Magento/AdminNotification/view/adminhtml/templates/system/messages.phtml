<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
declare(strict_types=1);

use Magento\AdminNotification\Block\System\Messages;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var Messages $block */
$lastCritical = $block->getLastCritical();
?>
<div id="system_messages"
     class="message-system<?php if ($lastCritical) : ?>
     message-system-unread<?php endif; ?>">
    <div class="message-system-inner">
        <?php if ($lastCritical) : ?>
            <ul class="message-system-list">
                <li class="message message-warning error">
                    <?= $escaper->escapeHtml($lastCritical->getText()) ?>
                </li>
            </ul>
        <?php endif; ?>
        <div class="message-system-short">
            <span class="message-system-short-label">
                <?= $escaper->escapeHtml(__('System Messages:')) ?>
            </span>

            <?php if ($block->getCriticalCount()) : ?>
                <div class="message message-warning error">
                    <a class="message-link"
                       href="#"
                       title="<?= $escaper->escapeHtml(__('Critical System Messages')) ?>">
                        <?= (int) $block->getCriticalCount() ?>
                    </a>
                </div>
            <?php endif; ?>

            <?php if ($block->getMajorCount()) : ?>
               <div class="message message-warning warning">
                   <a class="message-link" href="#" title="<?= $escaper->escapeHtml(__('Major System Messages')) ?>">
                       <?= (int) $block->getMajorCount() ?>
                   </a>
               </div>
            <?php endif; ?>
        </div>
        <div id="message-system-all"
             title="<?= $escaper->escapeHtml(__('System messages')) ?>"
             data-mage-init='<?= $escaper->escapeHtml($block->getSystemMessageDialogJson()) ?>'>
        </div>
    </div>
</div>
